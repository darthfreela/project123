<section class="content-header">
	<h1>
		Substituição Temporaria
	</h1>
	<ol class="breadcrumb">
		<li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
		<li><a href="#">Ferramentas do usuário</a></li>
		<li class="active">Substituição Temporaria</li>
	</ol>
</section>
<section class="content">
	<div class="box box-default collapsed-box">
		<div class="box-header with-border">
			<h3 class="box-title">Realizar Substituição Temporária</h3>
			<div class="box-tools pull-right">
				<button type="button" class="btn btn-box-tool" data-widget="collapse">
					<i class="fa fa-minus"></i>
				</button>
			</div>
		</div>
		<div class="alert-error">
            <%= flash[:error] %>
            <% if @tempReplacement.errors.any? %>
                <div id="error_explanation">
                    O formulário contém <%= pluralize(@tempReplacement.errors.count, "erro") %>.
                </div>
                <ul>
                    <% @tempReplacement.errors.full_messages.each do |msg| %>
                        <li><%= msg %></li>
                    <% end %>
                </ul>
            <% end %>
        </div>
		<%= form_for @tempReplacement do |f| %>
			<div class="box-body">
				<div class="form-group col-md-3">
					<label>ID Func. Substituido</label>
					<%= f.text_field @occupant.id_func, maxlength: "14", class:"form-control autocompleteFunc" %>
				</div>
				<div class="form-group col-md-5">
					<label>Nome do Substituido</label>
					<%= f.text_field @occupant.name, maxlength: "80", class:"form-control" %>
				</div>
				<div class="form-group col-md-2">
					<label>Posto Grad.</label>
					<%= f.text_field @occupant.pg, maxlength: "14", class:"form-control" %>
				</div>
				<div class="form-group col-md-2">
					<label>Função</label>
					<%= f.text_field @occupant.function, maxlength: "14", class:"form-control" %>
				</div>
				<div class="form-group col-md-3">
					<label>ID Func. Substituto</label>
					<%= f.text_field @substitute.id_func, maxlength: "14", class:"form-control" %>
				</div>
				<div class="form-group col-md-5">
					<label>Nome do Servidor Substituto</label>
					<%= f.text_field @substitute.name, maxlength: "80", class:"form-control" %>
				</div>
				<div class="form-group col-md-2">
					<label>Posto Grad.</label>
					<%= f.text_field @substitute.pg, maxlength: "14", class:"form-control" %>
				</div>
				<div class="form-group col-md-2">
					<label>Função</label>
					<%= f.text_field @substitute.function, maxlength: "14", class:"form-control" %>
				</div>
				<div class="form-group col-md-2">
					<label>Nrº Boletim</label>
					<%= f.text_field :daily_buletim_id, PlaceHolder: "Nrº Boletim", maxlength: "80", class:"form-control timepicker" %>
				</div>
				<div class="form-group col-md-12">
					<label>Motivo de Indisponibilidade</label>
					<%= f.text_area :unavailability_reason, PlaceHolder: "Motivo de Indisponibilidade", maxlength: "255", class:"form-control" %>
				</div>
				<div class="form-group col-md-6">
					<label>Período</label>
					<div class="row">
						<div class="col-md-4">
							<%= f.text_field :date_taking, class:"form-control data"%>
						</div>
						<div class="col-md-1">
							à
						</div>
						<div class="col-md-4">
							<%= f.text_field :date_exemption, class:"form-control data"%>
						</div>
					</div>
				</div>
			</div>
			<div class="box-footer">
                <%= f.submit "Salvar", class: "btn btn-success"%>
                <%= f.button "Limpar", class: "btn btn-danger"%>
            </div>
		<% end %>
	</div>
	<div class="box box-default">
		<div class="box-header with-border">
			<h3 class="box-title">Listar Substituição Temporária</h3>
			<div class="box-tools pull-right">
				<button type="button" class="btn btn-box-tool" data-widget="collapse">
					<i class="fa fa-minus"></i>
				</button>
			</div>
		</div>
		<div class="box-body">
			<div class="input-group input-group-sm">
				<input type="text" class="form-control">
				<span class="input-group-btn">
					<button type="button" class="btn btn-info btn-flat">Pesquisar</button>
				</span>
			</div>
			<div style="overflow: scroll">
			 	<% if @tempReplacement_show.count < 1%>
                	Não existem siglas cadastradas.
            	<% else %>
					<table id="motivos" class="table table-bordered table-striped">
						<thead>
							<tr>
								<th></th>
								<th>Id Func.</th>
								<th>Nome do Servidor</th>
								<th>Posto Grad.</th>
								<th>Cargo Assumido Lei 10993/97</th>
								<th></th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							<% @tempReplacement_show.each do |o|%>
								<tr style="cursor:pointer">
									<td><%= #o.id %></td>
									<td><%= #o.idFuncSubstituto %></td>
									<td><%= #o.nomeSubstituto%></td>
									<td><%= #o.idGraduacaoSubstituto%></td>
									<td><%= #o.idFuncaoSubstituto%></td>
									<td><%= link_to raw("<i class='fa fa-edit'>Editar</i>"), {:controller => 'temporary_replacements', :action => 'edit', :id => o.id}, class: 'btn btn-warning', method: :get %></td>
                                	<td><%= link_to raw("<i class='fa fa-close'>Remover</i>"), {:controller => 'temporary_replacements', :action => 'destroy', :id => o.id}, :data => {:confirm=>'Deseja realmente remover este registro?'},  class: 'btn btn-danger', method: :delete %></td>
								</tr>
								<tr>
									<td></td>
									<td colspan="7">
										<b>Id Func. Ocupante:</b> <%= #o.idFuncaoOcupante%><br>
										<b>Nome Ocupante:</b> <%= #o.nomeOcupante%><br>
										<b>Data de Assunção:</b> <%= #data_br o.dataAssuncao%> <br>
										<b>Data de Dispensa:</b> <%= #data_br o.dataDispensa%><br>
										<b>N° Boletim:</b> <%= #o.idBoletim%><br>
									</td>
								</tr>
							<% end %>
						</tbody>
					</table>
				<% end %>
			</div>
		</div>
	</div>
</section>
<script>
    $(document).ready(function () {
        $("#motivos tr:odd").addClass("odd");
        $("#motivos tr:not(.odd)").hide();
        $("#motivos tr:first-child").show();

        $("#motivos tr.odd").click(function () {
            $(this).next("tr").toggle();
            $(this).find(".arrow").toggleClass("up");
        });
        //$("#motivos").jExpand();
    });
</script>